import{b as I,c as p,d as T,e as k,g as N,j as M,l as q,q as L,s as D}from"./chunk-VIDUQQKM.js";import{a as A}from"./chunk-CABCZIUH.js";import"./chunk-OGU4BQWJ.js";import"./chunk-FBTTXVKJ.js";import{i as F,j as P,m as R}from"./chunk-JXAVADQN.js";import{$ as b,Ab as w,Bb as g,Jb as o,Kb as C,Pa as l,cb as h,d as y,hb as d,qb as s,rb as i,sb as r,tb as u,tc as E,wc as S}from"./chunk-O5M3UDUQ.js";function j(e,a){e&1&&(i(0,"span"),o(1,"El nombre es obligatorio."),r())}function G(e,a){if(e&1&&(i(0,"div",26),d(1,j,2,0,"span",23),r()),e&2){let n,t=g();l(),s("ngIf",(n=t.registerForm.get("nombre"))==null||n.errors==null?null:n.errors.required)}}function B(e,a){e&1&&(i(0,"span"),o(1,"El tel\xE9fono es obligatorio."),r())}function U(e,a){if(e&1&&(i(0,"div",26),d(1,B,2,0,"span",23),r()),e&2){let n,t=g();l(),s("ngIf",(n=t.registerForm.get("telefono"))==null||n.errors==null?null:n.errors.required)}}function W(e,a){e&1&&(i(0,"span"),o(1,"El WhatsApp es obligatorio."),r())}function O(e,a){if(e&1&&(i(0,"div",26),d(1,W,2,0,"span",23),r()),e&2){let n,t=g();l(),s("ngIf",(n=t.registerForm.get("whatsapp"))==null||n.errors==null?null:n.errors.required)}}function Y(e,a){e&1&&(i(0,"span"),o(1,"El correo es obligatorio."),r())}function z(e,a){e&1&&(i(0,"span"),o(1,"Ingrese un correo v\xE1lido."),r())}function H(e,a){if(e&1&&(i(0,"div",26),d(1,Y,2,0,"span",23)(2,z,2,0,"span",23),r()),e&2){let n,t,m=g();l(),s("ngIf",(n=m.registerForm.get("correo"))==null||n.errors==null?null:n.errors.required),l(),s("ngIf",(t=m.registerForm.get("correo"))==null||t.errors==null?null:t.errors.email)}}function J(e,a){e&1&&(i(0,"span"),o(1,"La contrase\xF1a es obligatoria."),r())}function K(e,a){e&1&&(i(0,"span"),o(1,"M\xEDnimo 8 caracteres."),r())}function Q(e,a){if(e&1&&(i(0,"div",26),d(1,J,2,0,"span",23)(2,K,2,0,"span",23),r()),e&2){let n,t,m=g();l(),s("ngIf",(n=m.registerForm.get("password"))==null||n.errors==null?null:n.errors.required),l(),s("ngIf",(t=m.registerForm.get("password"))==null||t.errors==null?null:t.errors.minlength)}}function X(e,a){e&1&&(i(0,"div",26),o(1," Las contrase\xF1as no coinciden. "),r())}function Z(e,a){if(e&1&&(i(0,"div",27)(1,"p",28),o(2),r()()),e&2){let n=g();l(2),C(n.errorMessage)}}function $(e,a){e&1&&(i(0,"span"),o(1,"Registrando..."),r())}function ee(e,a){e&1&&(i(0,"span"),o(1,"Registrarse"),r())}var V=class e{fb=b(L);userService=b(A);router=b(F);registerForm=this.fb.group({empresa:[""],nombre:["",[p.required]],telefono:["",[p.required]],whatsapp:["",[p.required]],correo:["",[p.required,p.email]],password:["",[p.required,p.minLength(8)]],confirmPassword:["",[p.required]]},{validators:this.passwordMatchValidator});errorMessage="";isLoading=!1;passwordMatchValidator(a){return a.get("password").value===a.get("confirmPassword").value?null:{mismatch:!0}}onSubmit(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched();return}this.isLoading=!0,this.errorMessage="";let t=this.registerForm.value,{confirmPassword:a}=t,n=y(t,["confirmPassword"]);this.userService.createUser(n).subscribe({next:()=>{this.isLoading=!1,this.router.navigate(["/login"],{queryParams:{registered:"true"}})},error:m=>{this.isLoading=!1,console.error("Registration error",m),typeof m.error?.message=="string"?this.errorMessage=m.error.message:Array.isArray(m.error?.message)?this.errorMessage=m.error.message.join(", "):this.errorMessage="Error al registrar usuario."}})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=h({type:e,selectors:[["app-register-page"]],decls:50,vars:11,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gray-100"],[1,"max-w-md","w-full","bg-white","shadow-lg","rounded-lg","p-8"],[1,"text-center","mb-8"],[1,"text-3xl","font-bold","text-gray-800"],[1,"text-gray-500"],[1,"space-y-4",3,"ngSubmit","formGroup"],["for","nombre",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","nombre","formControlName","nombre",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm"],["class","text-red-500 text-xs mt-1",4,"ngIf"],["for","empresa",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","empresa","formControlName","empresa",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm"],["for","telefono",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","telefono","formControlName","telefono",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm"],["for","whatsapp",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","whatsapp","formControlName","whatsapp",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm"],["for","correo",1,"block","text-sm","font-medium","text-gray-700"],["type","email","id","correo","formControlName","correo",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","password","formControlName","password",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm"],["for","confirmPassword",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","confirmPassword","formControlName","confirmPassword",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm"],["class","bg-red-50 border-l-4 border-red-500 p-4",4,"ngIf"],["type","submit",1,"w-full","flex","justify-center","py-2","px-4","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-indigo-600","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[4,"ngIf"],[1,"text-center","mt-4"],["routerLink","/login",1,"text-indigo-600","hover:text-indigo-500","text-sm","font-medium"],[1,"text-red-500","text-xs","mt-1"],[1,"bg-red-50","border-l-4","border-red-500","p-4"],[1,"text-red-700","text-sm"]],template:function(n,t){if(n&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),o(4,"Crear Cuenta"),r(),i(5,"p",4),o(6,"Reg\xEDstrate para gestionar propiedades"),r()(),i(7,"form",5),w("ngSubmit",function(){return t.onSubmit()}),i(8,"div")(9,"label",6),o(10,"Nombre Completo"),r(),u(11,"input",7),d(12,G,2,1,"div",8),r(),i(13,"div")(14,"label",9),o(15,"Empresa (Opcional)"),r(),u(16,"input",10),r(),i(17,"div")(18,"label",11),o(19,"Tel\xE9fono"),r(),u(20,"input",12),d(21,U,2,1,"div",8),r(),i(22,"div")(23,"label",13),o(24,"WhatsApp"),r(),u(25,"input",14),d(26,O,2,1,"div",8),r(),i(27,"div")(28,"label",15),o(29,"Correo Electr\xF3nico"),r(),u(30,"input",16),d(31,H,3,2,"div",8),r(),i(32,"div")(33,"label",17),o(34,"Contrase\xF1a"),r(),u(35,"input",18),d(36,Q,3,2,"div",8),r(),i(37,"div")(38,"label",19),o(39,"Confirmar Contrase\xF1a"),r(),u(40,"input",20),d(41,X,2,0,"div",8),r(),d(42,Z,3,1,"div",21),i(43,"div")(44,"button",22),d(45,$,2,0,"span",23)(46,ee,2,0,"span",23),r()(),i(47,"div",24)(48,"a",25),o(49,"\xBFYa tienes cuenta? Inicia Sesi\xF3n"),r()()()()()),n&2){let m,f,c,_,x,v;l(7),s("formGroup",t.registerForm),l(5),s("ngIf",((m=t.registerForm.get("nombre"))==null?null:m.touched)&&((m=t.registerForm.get("nombre"))==null?null:m.invalid)),l(9),s("ngIf",((f=t.registerForm.get("telefono"))==null?null:f.touched)&&((f=t.registerForm.get("telefono"))==null?null:f.invalid)),l(5),s("ngIf",((c=t.registerForm.get("whatsapp"))==null?null:c.touched)&&((c=t.registerForm.get("whatsapp"))==null?null:c.invalid)),l(5),s("ngIf",((_=t.registerForm.get("correo"))==null?null:_.touched)&&((_=t.registerForm.get("correo"))==null?null:_.invalid)),l(5),s("ngIf",((x=t.registerForm.get("password"))==null?null:x.touched)&&((x=t.registerForm.get("password"))==null?null:x.invalid)),l(5),s("ngIf",((v=t.registerForm.get("confirmPassword"))==null?null:v.touched)&&t.registerForm.hasError("mismatch")),l(),s("ngIf",t.errorMessage),l(2),s("disabled",t.registerForm.invalid||t.isLoading),l(),s("ngIf",t.isLoading),l(),s("ngIf",!t.isLoading)}},dependencies:[S,E,D,N,I,T,k,M,q,R,P],encapsulation:2})};export{V as RegisterPageComponent};
