import{a as j}from"./chunk-OTPCV5WJ.js";import{a as O}from"./chunk-GCRS3NYK.js";import"./chunk-FBTTXVKJ.js";import"./chunk-3EOSINCX.js";import{g as D,j as F,m as N}from"./chunk-JXAVADQN.js";import{$ as c,Ab as I,Bb as s,Gb as E,Jb as n,Kb as u,Mb as f,Na as y,Pa as p,Tb as g,Wb as x,Xb as C,Yb as S,Zb as w,cb as _,fa as b,ga as v,hb as a,qb as l,rb as o,sb as i,sc as L,tb as h,tc as k,vc as T,wc as U,zb as P}from"./chunk-O5M3UDUQ.js";var A=t=>["/properties",t,"edit"],R=t=>["/properties",t,"sign"];function V(t,r){t&1&&(o(0,"div",9)(1,"p"),n(2,"Mostrando propiedades del usuario seleccionado."),i(),o(3,"a",10),n(4,"Ver todas"),i()())}function B(t,r){t&1&&(o(0,"div",11),n(1,"Cargando propiedades..."),i())}function $(t,r){if(t&1&&(o(0,"div",12),n(1),i()),t&2){let e=s();p(),u(e.error)}}function z(t,r){if(t&1){let e=P();o(0,"div",15)(1,"div",16),h(2,"img",17),x(3,"imageUrl"),i(),o(4,"h3",18),n(5),i(),o(6,"p",19),n(7),i(),o(8,"p",20),n(9),x(10,"number"),i(),o(11,"div",21)(12,"button",22),n(13," Editar "),i(),o(14,"button",23),n(15," \u{1F5A8} Aviso "),i(),o(16,"button",24),I("click",function(){let m=b(e).$implicit,q=s(2);return v(q.deleteProperty(m._id))}),n(17," Eliminar "),i()()()}if(t&2){let e=r.$implicit;p(2),l("src",e.fotos&&e.fotos.length>0?C(3,8,e.fotos[0]):"/assets/no_image.png",y),p(3),u(e.nombreEdificio||"Propiedad sin nombre"),p(2),f("",e.direccion,", ",e.ciudad),p(2),f("$",S(10,10,e.precio,"1.2-2")," - ",e.tipoTransaccion),p(3),l("routerLink",g(13,A,e._id)),p(2),l("routerLink",g(15,R,e._id))}}function G(t,r){if(t&1&&(o(0,"div",13),a(1,z,18,17,"div",14),i()),t&2){let e=s();p(),l("ngForOf",e.properties)}}function H(t,r){t&1&&(o(0,"div",26)(1,"p"),n(2,"No hay propiedades para mostrar."),i()())}function J(t,r){if(t&1&&a(0,H,3,0,"div",25),t&2){let e=s();l("ngIf",!e.loading&&!e.error)}}var M=class t{propertyService=c(O);route=c(D);properties=[];loading=!1;error=null;filteredUserId=null;ngOnInit(){this.route.queryParams.subscribe(r=>{this.filteredUserId=r.userId,this.loadProperties()})}loadProperties(){this.loading=!0,this.error=null;let r;this.filteredUserId?r=this.propertyService.getPropertiesByUser(this.filteredUserId):r=this.propertyService.getAllProperties(),r.subscribe({next:e=>{this.properties=e,this.loading=!1},error:e=>{console.error("Error loading properties:",e),this.error="Error al cargar las propiedades.",this.loading=!1}})}deleteProperty(r){confirm("\xBFEst\xE1s seguro de que quieres eliminar esta propiedad?")&&this.propertyService.deleteProperty(r).subscribe({next:()=>{this.properties=this.properties.filter(e=>e._id!==r)},error:e=>{console.error("Error deleting property:",e),this.error="Error al eliminar la propiedad."}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=_({type:t,selectors:[["app-property-list"]],decls:12,vars:5,consts:[["noProperties",""],[1,"container","mx-auto","p-4"],[1,"flex","flex-col","md:flex-row","justify-between","items-center","mb-4"],[1,"text-2xl","font-bold"],["routerLink","/properties/create",1,"bg-green-500","hover:bg-green-700","text-white","font-bold","py-2","px-4","rounded","mt-2","md:mt-0"],["class","bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4 mb-4 flex justify-between items-center","role","alert",4,"ngIf"],["class","text-center text-blue-500",4,"ngIf"],["class","text-center text-red-500",4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",4,"ngIf","ngIfElse"],["role","alert",1,"bg-blue-100","border-l-4","border-blue-500","text-blue-700","p-4","mb-4","flex","justify-between","items-center"],["routerLink","/properties",1,"text-sm","font-bold","underline","hover:no-underline"],[1,"text-center","text-blue-500"],[1,"text-center","text-red-500"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],["class","bg-white shadow-md rounded-lg p-4",4,"ngFor","ngForOf"],[1,"bg-white","shadow-md","rounded-lg","p-4"],[1,"h-48","w-full","overflow-hidden","rounded-md","mb-4"],["alt","Imagen de la propiedad",1,"w-full","h-full","object-cover",3,"src"],[1,"text-xl","font-semibold"],[1,"text-gray-600"],[1,"text-gray-800","font-bold","mt-2"],[1,"mt-4","flex","space-x-2"],[1,"bg-blue-500","hover:bg-blue-700","text-white","font-bold","py-1","px-3","rounded","text-sm",3,"routerLink"],[1,"bg-purple-500","hover:bg-purple-700","text-white","font-bold","py-1","px-3","rounded","text-sm",3,"routerLink"],[1,"bg-red-500","hover:bg-red-700","text-white","font-bold","py-1","px-3","rounded","text-sm",3,"click"],["class","text-center text-gray-500",4,"ngIf"],[1,"text-center","text-gray-500"]],template:function(e,d){if(e&1&&(o(0,"div",1)(1,"div",2)(2,"h2",3),n(3,"Listado de Propiedades"),i(),o(4,"button",4),n(5," Crear Nueva Propiedad "),i()(),a(6,V,5,0,"div",5)(7,B,2,0,"div",6)(8,$,2,1,"div",7)(9,G,2,1,"div",8)(10,J,1,1,"ng-template",null,0,w),i()),e&2){let m=E(11);p(6),l("ngIf",d.filteredUserId),p(),l("ngIf",d.loading),p(),l("ngIf",d.error),p(),l("ngIf",d.properties.length>0)("ngIfElse",m)}},dependencies:[U,L,k,N,F,T,j],encapsulation:2})};export{M as PropertyListComponent};
