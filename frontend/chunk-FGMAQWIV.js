import{b as S,c as C,d as E,e as I,g as B,j as L,l as w,q as N,s as _}from"./chunk-VIDUQQKM.js";import{a as G}from"./chunk-JXM63PLH.js";import"./chunk-3EOSINCX.js";import{g as x,i as y,j as F}from"./chunk-JXAVADQN.js";import{$ as m,Ab as f,Jb as n,Kb as g,Lb as c,Pa as a,cb as u,hb as p,qb as l,rb as o,sb as i,tb as b,tc as h,wc as v}from"./chunk-O5M3UDUQ.js";function M(d,r){d&1&&(o(0,"div",13),n(1," El nombre es requerido. "),i())}var D=class d{fb=m(N);botsService=m(G);router=m(y);route=m(x);botForm;isEditing=!1;botId=null;isLoading=!1;constructor(){this.botForm=this.fb.group({name:["",[C.required]],empresaId:[""]})}ngOnInit(){this.botId=this.route.snapshot.paramMap.get("id"),this.botId&&(this.isEditing=!0,this.loadBot(this.botId))}loadBot(r){this.isLoading=!0,this.botsService.findOne(r).subscribe({next:e=>{this.botForm.patchValue({name:e.name,empresaId:e.empresa}),this.isLoading=!1},error:e=>{console.error("Error loading bot",e),this.isLoading=!1}})}onSubmit(){if(this.botForm.invalid)return;this.isLoading=!0;let r=this.botForm.value;(this.isEditing?this.botsService.update(this.botId,r):this.botsService.create(r)).subscribe({next:()=>{this.isLoading=!1,this.router.navigate(["/bots"])},error:t=>{console.error("Error saving bot",t),this.isLoading=!1}})}static \u0275fac=function(e){return new(e||d)};static \u0275cmp=u({type:d,selectors:[["app-bot-form"]],decls:18,vars:5,consts:[[1,"container","mx-auto","p-6"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold"],["routerLink","/bots",1,"text-gray-600","hover:text-gray-900"],[1,"bg-white","rounded-lg","shadow","p-6","max-w-lg","mx-auto"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","name",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","id","name","formControlName","name","placeholder","Ej: Bot Ventas",1,"w-full","rounded-md","border-gray-300","shadow-sm","focus:border-blue-500","focus:ring-blue-500","border","p-2"],["class","text-red-500 text-sm mt-1",4,"ngIf"],[1,"flex","justify-end","gap-3","mt-6"],["type","button","routerLink","/bots",1,"px-4","py-2","border","border-gray-300","rounded-md","shadow-sm","text-sm","font-medium","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500"],["type","submit",1,"px-4","py-2","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-blue-600","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","disabled:opacity-50",3,"disabled"],[1,"text-red-500","text-sm","mt-1"]],template:function(e,t){if(e&1&&(o(0,"div",0)(1,"div",1)(2,"h2",2),n(3),i(),o(4,"a",3),n(5,"Cancelar"),i()(),o(6,"div",4)(7,"form",5),f("ngSubmit",function(){return t.onSubmit()}),o(8,"div",6)(9,"label",7),n(10,"Nombre del Bot"),i(),b(11,"input",8),p(12,M,2,0,"div",9),i(),o(13,"div",10)(14,"button",11),n(15," Cancelar "),i(),o(16,"button",12),n(17),i()()()()()),e&2){let s;a(3),g(t.isEditing?"Editar Bot":"Crear Nuevo Bot"),a(4),l("formGroup",t.botForm),a(5),l("ngIf",((s=t.botForm.get("name"))==null?null:s.touched)&&((s=t.botForm.get("name"))==null?null:s.invalid)),a(4),l("disabled",t.botForm.invalid||t.isLoading),a(),c(" ",t.isLoading?"Guardando...":t.isEditing?"Actualizar":"Crear"," ")}},dependencies:[v,h,_,B,S,E,I,L,w,F],encapsulation:2})};export{D as BotFormComponent};
