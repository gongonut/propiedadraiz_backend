import{a as k}from"./chunk-CABCZIUH.js";import"./chunk-OGU4BQWJ.js";import"./chunk-FBTTXVKJ.js";import{j as L}from"./chunk-JXAVADQN.js";import{$ as g,Ab as E,Bb as l,Jb as o,Kb as u,Lb as d,Pa as n,Sb as w,Tb as f,cb as h,fa as v,ga as b,ha as x,hb as p,ia as _,qb as s,rb as r,rc as C,sb as t,sc as S,tb as c,tc as I,wc as U,zb as y}from"./chunk-O5M3UDUQ.js";var N=i=>["/users",i,"edit"],M=()=>["/properties"],V=i=>({userId:i});function A(i,a){i&1&&(r(0,"div",9),c(1,"div",10),t())}function O(i,a){if(i&1&&(r(0,"div",11)(1,"p",12),o(2,"Error"),t(),r(3,"p"),o(4),t()()),i&2){let e=l();n(4),u(e.error)}}function j(i,a){if(i&1&&(r(0,"span"),o(1),t()),i&2){let e=l(2).$implicit;n(),d("(",e.nit,")")}}function R(i,a){if(i&1&&(r(0,"p",39),o(1),p(2,j,2,1,"span",18),t()),i&2){let e=l().$implicit;n(),d(" ",e.empresa," "),n(),s("ngIf",e.nit)}}function $(i,a){if(i&1){let e=y();r(0,"tr",19)(1,"td",20)(2,"div",21)(3,"div",22)(4,"div",23),o(5),t()(),r(6,"div",24)(7,"p",25),o(8),t(),p(9,R,3,2,"p",26),t()()(),r(10,"td",20)(11,"p",27),o(12),t(),r(13,"p",28)(14,"span",29),x(),r(15,"svg",30),c(16,"path",31),t(),o(17),t()()(),_(),r(18,"td",20)(19,"span",32),c(20,"span",33),r(21,"span",34),o(22),t()()(),r(23,"td",20)(24,"div",35)(25,"a",36),o(26,"Editar"),t(),r(27,"a",37),o(28,"Propiedades"),t(),r(29,"button",38),E("click",function(){let P=v(e).$implicit,F=l(2);return b(F.deleteUser(P._id))}),o(30,"Eliminar"),t()()()()}if(i&2){let e=a.$implicit;n(5),d(" ",e.nombre.charAt(0).toUpperCase()," "),n(3),d(" ",e.nombre," "),n(),s("ngIf",e.empresa),n(3),u(e.correo),n(5),d(" ",e.telefono," "),n(2),s("ngClass",e.tipoPersona==="EMPRESA"?"text-purple-900":"text-green-900"),n(),s("ngClass",e.tipoPersona==="EMPRESA"?"bg-purple-200":"bg-green-200"),n(2),u(e.tipoPersona||"NATURAL"),n(3),s("routerLink",f(11,N,e._id)),n(2),s("routerLink",w(13,M))("queryParams",f(14,V,e._id))}}function q(i,a){i&1&&(r(0,"tr")(1,"td",40),o(2," No hay usuarios registrados. "),t()())}function D(i,a){if(i&1&&(r(0,"div",13)(1,"div",14)(2,"table",15)(3,"thead")(4,"tr")(5,"th",16),o(6," Usuario / Empresa "),t(),r(7,"th",16),o(8," Contacto "),t(),r(9,"th",16),o(10," Tipo "),t(),r(11,"th",16),o(12," Acciones "),t()()(),r(13,"tbody"),p(14,$,31,16,"tr",17)(15,q,3,0,"tr",18),t()()()()),i&2){let e=l();n(14),s("ngForOf",e.users),n(),s("ngIf",e.users.length===0)}}var T=class i{userService=g(k);users=[];loading=!0;error=null;ngOnInit(){this.loadUsers()}loadUsers(){this.loading=!0,this.userService.getUsers().subscribe({next:a=>{this.users=a,this.loading=!1},error:a=>{console.error("Error loading users:",a),this.error="No se pudieron cargar los usuarios. Por favor, intente nuevamente.",this.loading=!1}})}deleteUser(a){confirm("\xBFEst\xE1s seguro de que deseas eliminar este usuario? Esta acci\xF3n tambi\xE9n eliminar\xE1 todas las propiedades asociadas a \xE9l.")&&this.userService.deleteUser(a).subscribe({next:()=>{this.users=this.users.filter(e=>e._id!==a),alert("Usuario eliminado correctamente.")},error:e=>{console.error("Error deleting user:",e),alert("Error al eliminar el usuario. Intente nuevamente.")}})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=h({type:i,selectors:[["app-users-list"]],decls:11,vars:3,consts:[[1,"container","mx-auto","p-6"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-gray-800"],["routerLink","/users/onboard",1,"bg-blue-600","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded","transition","duration-200","flex","items-center","shadow-md"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","mr-2"],["fill-rule","evenodd","d","M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule","evenodd"],["class","flex justify-center my-8",4,"ngIf"],["class","bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4","role","alert",4,"ngIf"],["class","bg-white shadow-md rounded-lg overflow-hidden",4,"ngIf"],[1,"flex","justify-center","my-8"],[1,"animate-spin","rounded-full","h-10","w-10","border-b-2","border-blue-600"],["role","alert",1,"bg-red-100","border-l-4","border-red-500","text-red-700","p-4","mb-4"],[1,"font-bold"],[1,"bg-white","shadow-md","rounded-lg","overflow-hidden"],[1,"overflow-x-auto"],[1,"min-w-full","leading-normal"],[1,"px-5","py-3","border-b-2","border-gray-200","bg-gray-100","text-left","text-xs","font-semibold","text-gray-600","uppercase","tracking-wider"],["class","hover:bg-gray-50 transition duration-150",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"hover:bg-gray-50","transition","duration-150"],[1,"px-5","py-5","border-b","border-gray-200","bg-white","text-sm"],[1,"flex","items-center"],[1,"flex-shrink-0","w-10","h-10"],[1,"w-full","h-full","rounded-full","bg-blue-100","flex","items-center","justify-center","text-blue-600","font-bold","text-lg"],[1,"ml-3"],[1,"text-gray-900","whitespace-no-wrap","font-semibold"],["class","text-gray-600 text-xs",4,"ngIf"],[1,"text-gray-900","whitespace-no-wrap"],[1,"text-gray-500","text-xs","mt-1"],[1,"inline-flex","items-center"],["fill","currentColor","viewBox","0 0 20 20",1,"h-3","w-3","mr-1"],["d","M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"],[1,"relative","inline-block","px-3","py-1","font-semibold","leading-tight",3,"ngClass"],["aria-hidden","true",1,"absolute","inset-0","opacity-50","rounded-full",3,"ngClass"],[1,"relative"],[1,"flex","items-center","space-x-3"],[1,"text-blue-600","hover:text-blue-900","text-sm","font-medium","cursor-pointer",3,"routerLink"],[1,"text-indigo-600","hover:text-indigo-900","text-sm","font-medium","cursor-pointer",3,"routerLink","queryParams"],[1,"text-red-600","hover:text-red-900","text-sm","font-medium","cursor-pointer",3,"click"],[1,"text-gray-600","text-xs"],["colspan","4",1,"px-5","py-5","border-b","border-gray-200","bg-white","text-sm","text-center","text-gray-500"]],template:function(e,m){e&1&&(r(0,"div",0)(1,"div",1)(2,"h2",2),o(3,"Gesti\xF3n de Usuarios"),t(),r(4,"a",3),x(),r(5,"svg",4),c(6,"path",5),t(),o(7," Nuevo Cliente "),t()(),p(8,A,2,0,"div",6)(9,O,5,1,"div",7)(10,D,16,2,"div",8),t()),e&2&&(n(8),s("ngIf",m.loading),n(),s("ngIf",m.error),n(),s("ngIf",!m.loading&&!m.error))},dependencies:[U,C,S,I,L],encapsulation:2})};export{T as UsersListComponent};
