import{a as F,b as L,c as p,d as E,e as I,g as M,j as P,l as N,q as T,s as k}from"./chunk-VIDUQQKM.js";import{a as w}from"./chunk-OGU4BQWJ.js";import"./chunk-FBTTXVKJ.js";import{i as y,j as C,m as S}from"./chunk-JXAVADQN.js";import{$ as u,Ab as b,Bb as f,Jb as a,Kb as _,Pa as m,cb as x,hb as d,qb as s,rb as i,sb as n,tb as c,tc as v,wc as h}from"./chunk-O5M3UDUQ.js";function q(e,l){e&1&&(i(0,"span"),a(1,"El correo es obligatorio."),n())}function A(e,l){e&1&&(i(0,"span"),a(1,"Ingrese un correo v\xE1lido."),n())}function R(e,l){if(e&1&&(i(0,"div",19),d(1,q,2,0,"span",16)(2,A,2,0,"span",16),n()),e&2){let o,t,r=f();m(),s("ngIf",(o=r.loginForm.get("correo"))==null||o.errors==null?null:o.errors.required),m(),s("ngIf",(t=r.loginForm.get("correo"))==null||t.errors==null?null:t.errors.email)}}function V(e,l){e&1&&(i(0,"span"),a(1,"La contrase\xF1a es obligatoria."),n())}function G(e,l){e&1&&(i(0,"span"),a(1,"M\xEDnimo 6 caracteres."),n())}function j(e,l){if(e&1&&(i(0,"div",19),d(1,V,2,0,"span",16)(2,G,2,0,"span",16),n()),e&2){let o,t,r=f();m(),s("ngIf",(o=r.loginForm.get("password"))==null||o.errors==null?null:o.errors.required),m(),s("ngIf",(t=r.loginForm.get("password"))==null||t.errors==null?null:t.errors.minlength)}}function B(e,l){if(e&1&&(i(0,"div",20)(1,"p",21),a(2),n()()),e&2){let o=f();m(2),_(o.errorMessage)}}function z(e,l){e&1&&(i(0,"span"),a(1,"Cargando..."),n())}function H(e,l){e&1&&(i(0,"span"),a(1,"Iniciar Sesi\xF3n"),n())}var D=class e{fb=u(T);authService=u(w);router=u(y);loginForm=this.fb.group({correo:["",[p.required,p.email]],password:["",[p.required,p.minLength(6)]],rememberMe:[!1]});errorMessage="";isLoading=!1;onSubmit(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}this.isLoading=!0,this.errorMessage="";let{correo:l,password:o,rememberMe:t}=this.loginForm.value;this.authService.login({correo:l,password:o}).subscribe({next:()=>{t&&this.authService.rememberMe({correo:l,password:o}),this.isLoading=!1},error:r=>{this.isLoading=!1,console.error("Login error",r),this.errorMessage=r.error?.message||"Error al iniciar sesi\xF3n. Verifique sus credenciales."}})}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=x({type:e,selectors:[["app-login-page"]],decls:30,vars:7,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gray-100"],[1,"max-w-md","w-full","bg-white","shadow-lg","rounded-lg","p-8"],[1,"text-center","mb-8"],[1,"text-3xl","font-bold","text-gray-800"],[1,"text-gray-500"],[1,"space-y-6",3,"ngSubmit","formGroup"],["for","correo",1,"block","text-sm","font-medium","text-gray-700"],["type","email","id","correo","formControlName","correo","placeholder","tu@email.com",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm"],["class","text-red-500 text-xs mt-1",4,"ngIf"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["type","password","id","password","formControlName","password","placeholder","******",1,"mt-1","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm"],[1,"flex","items-center"],["id","remember-me","name","remember-me","type","checkbox","formControlName","rememberMe",1,"h-4","w-4","text-indigo-600","focus:ring-indigo-500","border-gray-300","rounded"],["for","remember-me",1,"ml-2","block","text-sm","text-gray-900"],["class","bg-red-50 border-l-4 border-red-500 p-4",4,"ngIf"],["type","submit",1,"w-full","flex","justify-center","py-2","px-4","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-indigo-600","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[4,"ngIf"],[1,"text-center","mt-4"],["routerLink","/register",1,"text-indigo-600","hover:text-indigo-500","text-sm","font-medium"],[1,"text-red-500","text-xs","mt-1"],[1,"bg-red-50","border-l-4","border-red-500","p-4"],[1,"text-red-700","text-sm"]],template:function(o,t){if(o&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),a(4,"Inmobiliaria"),n(),i(5,"p",4),a(6,"Inicia sesi\xF3n para gestionar tus propiedades"),n()(),i(7,"form",5),b("ngSubmit",function(){return t.onSubmit()}),i(8,"div")(9,"label",6),a(10,"Correo Electr\xF3nico"),n(),c(11,"input",7),d(12,R,3,2,"div",8),n(),i(13,"div")(14,"label",9),a(15,"Contrase\xF1a"),n(),c(16,"input",10),d(17,j,3,2,"div",8),n(),i(18,"div",11),c(19,"input",12),i(20,"label",13),a(21," Mantener sesi\xF3n iniciada "),n()(),d(22,B,3,1,"div",14),i(23,"div")(24,"button",15),d(25,z,2,0,"span",16)(26,H,2,0,"span",16),n()(),i(27,"div",17)(28,"a",18),a(29,"\xBFNo tienes cuenta? Reg\xEDstrate"),n()()()()()),o&2){let r,g;m(7),s("formGroup",t.loginForm),m(5),s("ngIf",((r=t.loginForm.get("correo"))==null?null:r.touched)&&((r=t.loginForm.get("correo"))==null?null:r.invalid)),m(5),s("ngIf",((g=t.loginForm.get("password"))==null?null:g.touched)&&((g=t.loginForm.get("password"))==null?null:g.invalid)),m(5),s("ngIf",t.errorMessage),m(2),s("disabled",t.loginForm.invalid||t.isLoading),m(),s("ngIf",t.isLoading),m(),s("ngIf",!t.isLoading)}},dependencies:[h,v,k,M,L,F,E,I,P,N,S,C],encapsulation:2})};export{D as LoginPageComponent};
